<div class="main-scroll-container bg-slate-50 dark:bg-gray-900">

  <section
    id="hero-section"
    class="min-h-screen flex flex-col justify-center items-center text-center relative bg-cover bg-center bg-no-repeat overflow-hidden"
    style="background-image: url('/assets/login/casa1.jpg'); background-size: cover; background-position: center;"
>
    <div class="absolute inset-0 bg-black/40"></div>
    
    <div class="relative z-10 max-w-3xl px-4">
      <h1 class="text-5xl font-extrabold mb-6 text-white leading-tight tracking-tight drop-shadow-lg">
        Encuentra tu hogar temporal perfecto
      </h1>
      <p class="text-xl font-light mb-10 text-slate-100 max-w-xl mx-auto drop-shadow-lg">
        Rentas mensuales con todas las comodidades, verificadas y listas para ti.
      </p>
      <button
        routerLink="/principal/buscarCasa"
        class="inline-block bg-white text-[#7FA6FF] font-semibold px-8 py-3 rounded-full shadow-md hover:bg-slate-100 hover:scale-105 transform transition-all duration-300 ease-in-out"
      >
        Explorar propiedades
      </button>
    </div>
  </section>

 <section class="min-h-screen flex items-center justify-center bg-white dark:bg-gray-900 py-24 px-6">
  <div class="max-w-7xl mx-auto w-full">
    <div class="text-center mb-20">
      <p class="text-[#7FA6FF] uppercase font-semibold tracking-widest mb-3 text-sm">
        Conoce nuestras ventajas
      </p>
      <h2 class="text-4xl md:text-5xl font-extrabold mb-5 text-slate-900 dark:text-white">
        ¿Por qué elegir Nestly?
      </h2>
      <p class="text-lg md:text-xl text-slate-600 dark:text-slate-400 max-w-3xl mx-auto">
        Tu tranquilidad es nuestra prioridad. Te ofrecemos la mejor experiencia en renta de propiedades.
      </p>
    </div>

    <div class="grid gap-10 sm:grid-cols-2 lg:grid-cols-3">
      <!-- CARD 1 -->
      <div class="group bg-slate-50 dark:bg-gray-800/50 rounded-2xl p-8 border border-slate-200 dark:border-gray-700 hover:shadow-2xl hover:border-[#7FA6FF] transition-all duration-300 cursor-default">
        <div class="text-[#7FA6FF] bg-[#7FA6FF]/10 rounded-full w-16 h-16 flex items-center justify-center mb-6 mx-auto group-hover:scale-110 transition">
          <!-- ICONO -->
          <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="1.5"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 
              11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.622 
              5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 
              0-6.1-1.248-8.25-3.286Zm0 13.036h.008v.008h-.008v-.008Z" />
          </svg>
        </div>
        <h3 class="text-xl font-semibold mb-3 text-slate-900 dark:text-white text-center">
          Propiedades Verificadas
        </h3>
        <p class="text-slate-600 dark:text-slate-400 text-center">
          Solo rentas seguras con dueños y propiedades verificadas para tu confianza.
        </p>
      </div>

      <!-- CARD 2 -->
      <div class="group bg-slate-50 dark:bg-gray-800/50 rounded-2xl p-8 border border-slate-200 dark:border-gray-700 hover:shadow-2xl hover:border-[#D98EDF] transition-all duration-300 cursor-default">
        <div class="text-[#D98EDF] bg-[#D98EDF]/10 rounded-full w-16 h-16 flex items-center justify-center mb-6 mx-auto group-hover:scale-110 transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="1.5"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 
              1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 
              12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 
              1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 
              1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
          </svg>
        </div>
        <h3 class="text-xl font-semibold mb-3 text-slate-900 dark:text-white text-center">
          Contratos Flexibles
        </h3>
        <p class="text-slate-600 dark:text-slate-400 text-center">
          Renta desde un mes hasta un año, adaptándonos a tus necesidades.
        </p>
      </div>

      <!-- CARD 3 -->
      <div class="group bg-slate-50 dark:bg-gray-800/50 rounded-2xl p-8 border border-slate-200 dark:border-gray-700 hover:shadow-2xl hover:border-[#7FA6FF] transition-all duration-300 cursor-default">
        <div class="text-[#7FA6FF] bg-[#7FA6FF]/10 rounded-full w-16 h-16 flex items-center justify-center mb-6 mx-auto group-hover:scale-110 transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="1.5"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8a9.863 
              9.863 0 01-4-.8L3 20l1.8-4a7.864 7.864 0 01-1.8-5.2c0-4.418 
              4.03-8 9-8s9 3.582 9 8z" />
          </svg>
        </div>
        <h3 class="text-xl font-semibold mb-3 text-slate-900 dark:text-white text-center">
          Atención Personalizada
        </h3>
        <p class="text-slate-600 dark:text-slate-400 text-center">
          Nuestro equipo te acompaña durante todo el proceso de renta.
        </p>
      </div>
    </div>
  </div>
</section>


<section class="container mx-auto px-4 py-6 text-gray-900 dark:text-white">
  <h2 class="text-2xl font-bold text-center mb-8">Propiedades Destacadas</h2>

  <!-- Skeleton loader -->
  <div
    *ngIf="isLoading"
    class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3"
  >
    <div
      *ngFor="let _ of [1,2,3]"
      class="animate-pulse bg-white dark:bg-gray-800/50 rounded-2xl border border-[#7FA6FF40] shadow-[0_4px_6px_rgba(127,166,255,0.15)] flex flex-col"
    >
      <!-- Skeleton imagen -->
      <div class="aspect-[16/10] w-full bg-gray-200 dark:bg-gray-700 rounded-t-2xl"></div>

      <!-- Skeleton contenido -->
      <div class="p-5 flex flex-col justify-between flex-1">
        <div class="space-y-3">
          <div class="h-5 w-24 rounded-full bg-gray-300 dark:bg-gray-600"></div>
          <div class="h-5 w-3/4 rounded bg-gray-300 dark:bg-gray-600"></div>
          <div class="h-4 w-1/2 rounded bg-gray-200 dark:bg-gray-700"></div>

          <div class="flex gap-3 mt-2">
            <div class="h-6 w-20 rounded-full bg-gray-200 dark:bg-gray-700"></div>
            <div class="h-6 w-20 rounded-full bg-gray-200 dark:bg-gray-700"></div>
          </div>
        </div>

        <div class="flex items-center justify-between mt-5 pt-4 border-t border-[#7FA6FF40]">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-full bg-gray-300 dark:bg-gray-600"></div>
            <div>
              <div class="h-3 w-20 bg-gray-300 dark:bg-gray-600 rounded mb-1"></div>
              <div class="h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded"></div>
            </div>
          </div>
          <div class="text-right">
            <div class="h-6 w-16 bg-gray-300 dark:bg-gray-600 rounded"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Grid de propiedades -->
  <div
    *ngIf="!isLoading"
    class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3"
  >
    <div
      *ngFor="let property of featuredProperties | slice:0:3"
      (click)="handlePropertyClick(property.id_propiedad)"
      class="bg-white dark:bg-gray-800/50 rounded-2xl border border-[#7FA6FF40] shadow-[0_4px_6px_rgba(127,166,255,0.15)] hover:shadow-[0_6px_12px_rgba(127,166,255,0.3)] transition-all duration-300 ease-in-out hover:-translate-y-1 cursor-pointer flex flex-col group"
    >
      <!-- Imagen -->
      <div class="relative aspect-[16/10] w-full overflow-hidden rounded-t-2xl">
        <img
          [src]="getFirstPhoto(property)"
          [alt]="property.titulo"
          class="object-cover w-full h-full transition-transform duration-500 ease-in-out group-hover:scale-105 rounded-t-2xl"
          loading="lazy"
        />
        <div
          *ngIf="isUserLoggedIn"
          (click)="$event.stopPropagation(); toggleFavorito(property, $event)"
          class="absolute top-3 right-3 z-10 bg-white/90 dark:bg-gray-800/70 backdrop-blur p-2 rounded-full hover:scale-110 text-[#7FA6FF] dark:text-[#D98EDF] transition cursor-pointer"
          aria-label="Favorito"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            stroke-width="2"
            [attr.fill]="favoritoIds.has(property.id_propiedad) ? '#ec4899' : 'none'"
            [attr.stroke]="favoritoIds.has(property.id_propiedad) ? '#ec4899' : '#7FA6FF'"
            class="w-5 h-5"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"
            />
          </svg>
        </div>
      </div>

      <!-- Contenido -->
      <div class="p-5 flex flex-col justify-between flex-1">
        <div>
          <span
            class="inline-block text-xs font-semibold text-white rounded-full px-3 py-1 mb-2"
            style="background-color: #7FA6FF;"
          >
            {{ property.tipo_propiedad?.nombre || 'Propiedad' }}
          </span>

          <h3
            class="text-lg font-bold text-slate-800 dark:text-slate-100 mb-1 line-clamp-2"
            [title]="property.titulo"
          >
            {{ property.titulo }}
          </h3>

          <p class="text-sm text-slate-500 dark:text-slate-400 flex items-center gap-1.5 mb-4">
            <svg
              class="w-4 h-4 text-[#7FA6FF]"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                fill-rule="evenodd"
                d="M11.54 22.351l.07.04.028.016a.76.76 0 00.723 0l.028-.015.071-.041a16.975 16.975 0 001.144-.742 19.58 19.58 0 002.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 00-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 002.682 2.282 16.975 16.975 0 001.145.742zM12 13.5a3 3 0 100-6 3 3 0 000 6z"
                clip-rule="evenodd"
              />
            </svg>
            {{ property.ciudad }}, {{ property.pais }}
          </p>

          <div class="flex gap-3 mt-2 flex-wrap">
            <span
              class="flex items-center gap-1.5 bg-slate-100 dark:bg-gray-700 text-slate-700 dark:text-slate-300 text-xs font-medium px-2.5 py-1 rounded-full"
            >
              🛏️ {{ property.habitaciones }} hab
            </span>
            <span
              class="flex items-center gap-1.5 bg-slate-100 dark:bg-gray-700 text-slate-700 dark:text-slate-300 text-xs font-medium px-2.5 py-1 rounded-full"
            >
              🛁 {{ property.banos }} baños
            </span>
          </div>
        </div>

        <div class="flex items-center justify-between mt-5 pt-4 border-t border-[#7FA6FF40]">
          <div *ngIf="property.propietario" class="flex items-center gap-3">
            <img
              [src]="property.propietario.avatar_url || 'assets/default-avatar.jpg'"
              alt="Avatar del propietario"
              class="w-10 h-10 rounded-full object-cover border-2 border-[#7FA6FF]"
            />
            <div>
              <span class="text-xs text-[#7FA6FF] dark:text-[#D98EDF]">Propietario</span>
              <p class="text-sm font-semibold text-slate-700 dark:text-slate-300 leading-tight break-words">
                {{ property.propietario.first_name }} {{ property.propietario.last_name_paternal }}
              </p>
            </div>
          </div>
          <div class="text-right">
            <p class="font-bold text-lg text-[#7FA6FF] dark:text-[#D98EDF]">
              {{ formatPrice(property.precio, property.anualizado) }}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


</div>

<footer class="bg-gray-800 text-slate-300">
    <div class="max-w-7xl mx-auto px-6 py-16">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10 text-center md:text-left">
            <div class="flex flex-col items-center md:items-start">
              <h3 class="text-2xl font-bold text-white mb-3">Nes<span class="text-[#7FA6FF]">tly</span></h3>
              <p class="text-slate-400 max-w-xs mb-6">Tu próximo hogar está a solo un clic de distancia. Seguridad y comodidad en cada alquiler.</p>
              <div class="flex gap-5">
                 <a href="https://wa.me/524151008439" aria-label="WhatsApp" class="text-slate-400 hover:text-[#7FA6FF] transition">
                    <img src="assets/qnSomos/whatsapp.png" alt="WhatsApp" class="w-6 h-6" />
                 </a>
                 <a href="mailto:juandavidtapia123@gmail.com" aria-label="Email" class="text-slate-400 hover:text-[#7FA6FF] transition">
                    <img src="assets/qnSomos/gmail.png" alt="Gmail" class="w-6 h-6" />
                 </a>
                 <a href="https://www.instagram.com/davidtapiaa_/" aria-label="Instagram" class="text-slate-400 hover:text-[#7FA6FF] transition">
                    <img src="assets/qnSomos/instagram.png" alt="Instagram" class="w-6 h-6" />
                 </a>
              </div>
            </div>

            <div>
              <h4 class="text-lg font-semibold text-white mb-4 tracking-wider uppercase">Explorar</h4>
              <ul class="space-y-3 text-slate-400">
                <li><a routerLink="/" class="hover:text-[#7FA6FF] transition">Inicio</a></li>
                <li><a routerLink="/principal/publicarCasa" class="hover:text-[#7FA6FF] transition">Publicar Propiedad</a></li>
                <li><a routerLink="/principal/buscarCasa" class="hover:text-[#7FA6FF] transition">Buscar Propiedad</a></li>
                <li><a routerLink="/principal/faq" class="hover:text-[#7FA6FF] transition">Preguntas Frecuentes</a></li>
              </ul>
            </div>
            
            <div>
              <h4 class="text-lg font-semibold text-white mb-4 tracking-wider uppercase">Legal</h4>
              <ul class="space-y-3 text-slate-400">
                <li><a href="#" class="hover:text-[#7FA6FF] transition">Términos y Condiciones</a></li>
                <li><a href="#" class="hover:text-[#7FA6FF] transition">Política de Privacidad</a></li>
                <li><a href="#" class="hover:text-[#7FA6FF] transition">Aviso Legal</a></li>
              </ul>
            </div>

            <div>
              <h4 class="text-lg font-semibold text-white mb-4 tracking-wider uppercase">Newsletter</h4>
              <p class="text-slate-400 mb-4">Recibe las mejores ofertas y novedades directamente en tu correo.</p>
              <form class="flex">
                <input type="email" placeholder="Tu correo" required class="w-full px-4 py-2 rounded-l-md bg-slate-700 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-[#7FA6FF] border border-slate-600 focus:border-[#7FA6FF] transition"/>
                <button type="submit" class="bg-[#7FA6FF] text-white font-bold px-4 py-2 rounded-r-md hover:bg-blue-500 transition">OK</button>
              </form>
            </div>
        </div>

        <div class="mt-16 border-t border-slate-700 pt-8 text-center text-sm text-slate-500">
          <p>Nestly &copy; 2025 - Tu hogar temporal ideal. Todos los derechos reservados.</p>
        </div>
    </div>
  </footer>