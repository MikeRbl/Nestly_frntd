<div class="background background bg-gray-50 dark:bg-gray-800">
<div class="app-container background bg-gray-50 dark:bg-gray-800">
  <!-- Hero Section -->
   <div class="background background bg-gray-50 dark:bg-gray-800">
  <section class="hero-section">
    <div class="hero-content">

      <h1 class="dark:text-white">Encuentra tu hogar temporal perfecto</h1>
      <p class="hero-subtitle dark:text-gray-300">Rentas mensuales con todas las comodidades</p>
      <button routerLink="/principal/buscarCasa" class="cta-button bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white">
        Explorar propiedades
      </button>

    </div>
  </section>
  </div>

  <!-- Beneficios -->
  <section class="benefits-section background bg-gray-50 dark:bg-gray-800">
    <div class="section-header text-gray-900 dark:text-white">
      <h2 class="text-gray-900 dark:text-white">¿Por qué elegir Nestly?</h2>
      <p class="text-gray-600 dark:text-gray-400">La mejor plataforma para rentas mensuales</p>
    </div>
    
    <div class="benefits-grid">
      <div class="benefit-card bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700">
        <div class="benefit-icon text-blue-500 dark:text-blue-400">🔒</div>
        <h3 class="text-gray-900 dark:text-white">Seguridad garantizada</h3>
        <p class="text-gray-600 dark:text-gray-400">Todos nuestros arrendadores verifican su identidad</p>
      </div>
      
      <div class="benefit-card bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700">
        <div class="benefit-icon text-blue-500 dark:text-blue-400">📝</div>
        <h3 class="text-gray-900 dark:text-white">Contratos flexibles</h3>
        <p class="text-gray-600 dark:text-gray-400">Rentas desde 1 mes hasta 1 año</p>
      </div>
      
      <div class="benefit-card bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700">
        <div class="benefit-icon text-blue-500 dark:text-blue-400">🏡</div>
        <h3 class="text-gray-900 dark:text-white">Propiedades equipadas</h3>
        <p class="text-gray-600 dark:text-gray-400">La mayoría incluyen servicios básicos</p>
      </div>
    </div>
  </section>

 <!-- Propiedades destacadas -->
<!-- Este contenedor principal muestra el grid de propiedades o los mensajes de carga/error -->
<div *ngIf="isLoading" class="text-center p-10">
  <p class="text-gray-500 dark:text-gray-400">Cargando propiedades...</p>
</div>

<div *ngIf="errorMessage" class="text-center p-10">
  <p class="text-red-500">{{ errorMessage }}</p>
</div>

<!-- Propiedades destacadas -->
<!-- Este contenedor principal muestra el grid de propiedades o los mensajes de carga/error -->
<div *ngIf="isLoading" class="text-center p-10">
  <p class="text-gray-500 dark:text-gray-400">Cargando propiedades...</p>
</div>

<div *ngIf="errorMessage" class="text-center p-10">
  <p class="text-red-500">{{ errorMessage }}</p>
</div>

<!-- Grid de Propiedades -->
<div *ngIf="!isLoading && !errorMessage"
     class="property-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

  <div *ngFor="let property of featuredProperties"
       class="property-card bg-white dark:bg-gray-800 rounded-3xl overflow-hidden border border-gray-200 dark:border-gray-700 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 flex flex-col group cursor-pointer"
       (click)="handlePropertyClick(property.id_propiedad)">

    <!-- IMAGEN Y BADGES -->
    <div class="relative">
      <!-- Llama a tu función getFirstPhoto(property) para obtener la imagen -->
      <img [src]="getFirstPhoto(property)"
           [alt]="property.titulo"
           class="w-full h-56 object-cover transition-transform duration-300 group-hover:scale-105" />

      <!-- === ICONO DE FAVORITO === -->
      <div 
          *ngIf="isUserLoggedIn"
          (click)="toggleFavorito(property, $event)" 
          class="absolute top-3 right-3 bg-white/70 backdrop-blur-sm p-2 rounded-full cursor-pointer transition-transform hover:scale-110 active:scale-95">
          
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
</svg>

      </div>

      <div *ngIf="property.resenas_avg_puntuacion"
           class="absolute top-3 left-3 bg-white text-pink-500 px-3 py-1 rounded-full flex items-center gap-1.5 text-sm font-semibold">
          <!-- Estrella rellena amarilla -->
          <svg xmlns="http://www.w3.org/2000/svg" 
               viewBox="0 0 24 24" 
               fill="currentColor" 
               class="w-6 h-6 text-pink-500">
            <path d="M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557L3.04 10.385a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z" />
          </svg>
          <span class="text-xl font-bold">
            {{ property.resenas_avg_puntuacion | number:'1.1-1' }}
          </span>
      </div>
    </div>

    <!-- CONTENIDO DE LA TARJETA -->
    <div class="p-4 flex flex-col flex-grow">
      
      <!-- TÍTULO Y PRECIO -->
      <div class="flex justify-between items-start gap-2">
        
        <h3 class="text-lg font-bold text-gray-800 dark:text-white" [title]="property.titulo">
          {{ property.titulo }}
        </h3>
        <!-- Llama a tu función formatPrice con property.precio y property.anualizado -->
        <p class="text-lg font-bold text-pink-600 dark:text-pink-400 flex-shrink-0">
          {{ formatPrice(property.precio, property.anualizado) }}
        </p>
      </div>

      <!-- UBICACIÓN (Usa property.ciudad y property.pais) -->
      <p class="text-sm text-gray-500 dark:text-gray-400 -mt-1">
        📍 {{ property.ciudad }}, {{ property.pais }}
      </p>

      <!-- DETALLES Y PUBLICADOR (SECCIÓN INFERIOR) -->
      <div class="mt-4 pt-3 border-t border-gray-100 dark:border-gray-700/50">
        <!-- Fila para tipo de propiedad y características -->
        <p class="text-sm text-gray-600 dark:text-gray-300 flex items-center gap-3">
          <!-- El tipo de propiedad se muestra aquí -->
          <span>🏠 {{ property.tipo_propiedad?.nombre || 'Propiedad' }}</span>
          <span class="text-gray-300 dark:text-gray-600">•</span>
          <span>🛏️ {{ property.habitaciones }} hab</span>
          <span class="text-gray-300 dark:text-gray-600">•</span>
          <span>🚽 {{ property.banos }} baños</span>
        </p>
        
        <!-- Fila para la información del publicador -->
        <div *ngIf="property.propietario" class="flex items-center gap-2 mt-3">
          <img [src]="property.propietario.avatar_url || 'assets/default-avatar.jpg'"
               onerror="this.src='assets/default-avatar.jpg'"
               alt="Avatar del propietario"
               class="w-6 h-6 rounded-full object-cover" />
          <span class="text-sm text-gray-500 dark:text-gray-400 font-bold">
            <!-- Se muestra el nombre y primer apellido del propietario -->
            {{ property.propietario.first_name }} {{ property.propietario.last_name_paternal }}
          </span>
        </div>
      </div>
    </div>
  </div>
</div>


  <!-- Testimonios -->
  <section class="testimonials-section background bg-gray-50 dark:bg-gray-800">
    <div class="section-header">
      <h2 class="text-gray-900 dark:text-white">Lo que dicen nuestros usuarios</h2>
      <p class="text-gray-600 dark:text-gray-400">Experiencias reales con Nestly</p>
    </div>
    
    <div class="testimonials-grid">
      <div class="testimonial-card bg-gray-50 dark:bg-gray-800">
        <div class="testimonial-content">
          <div class="quote-icon text-blue-500 dark:text-blue-400">❝</div>
          <p class="text-gray-700 dark:text-gray-300">Encontré mi departamento ideal en 2 días. El proceso fue muy sencillo y seguro.</p>
        </div>
        <div class="testimonial-author">
          <img src="assets/navbar/usuario.png" alt="Usuario" class="author-avatar">
          <div>
            <h4 class="text-gray-900 dark:text-white">Ana Martínez</h4>
            <p class="text-gray-600 dark:text-gray-400">Inquilina desde 2022</p>
          </div>
        </div>
      </div>
      
      <div class="testimonial-card bg-gray-50 dark:bg-gray-800">
        <div class="testimonial-content">
          <div class="quote-icon text-blue-500 dark:text-blue-400">❝</div>
          <p class="text-gray-700 dark:text-gray-300">Como arrendador, me ha ayudado a mantener mi propiedad siempre ocupada.</p>
        </div>
        <div class="testimonial-author">
          <img src="assets/navbar/usuario.png" alt="Usuario" class="author-avatar">
          <div>
            <h4 class="text-gray-900 dark:text-white">Carlos Rodríguez</h4>
            <p class="text-gray-600 dark:text-gray-400">Arrendador desde 2021</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Final -->
  <div class="Foter bg-gray-100 dark:bg-gray-900">
    <!-- Sección de contacto -->
    <footer class="site-footer">
      <div class="footer-container">
          <div class="footer-section">
              <h3 class="footer-logo dark:text-white">Nes<span class="dark:text-blue-400">tly</span></h3>
              <p class="footer-description text-gray-600 dark:text-gray-300">Encuentra tu hogar ideal con los mejores profesionales en bienes raíces.</p>
              <div class="footer-social">
                  <a class="link" href="https://wa.me/524151008439">
                      <img class="social-icon" src="" alt="Ayuda">
                  </a>    
                  <a class="link" href="mailto:juandavidtapia123@gmail.com">
                      <img class="social-icon" src="assets/qnSomos/gmail.png" alt="Preguntas">
                  </a>
                  <a class="link" href="https://www.instagram.com/davidtapiaa_/">
                      <img class="social-icon" src="assets/qnSomos/instagram.png" alt="Contacto">
                  </a>
              </div>
          </div>
          
          <div class="footer-section">
              <h4 class="footer-title dark:text-white">Explorar</h4>
              <ul class="footer-links">
                  <li><a href="#REGRESA" class="text-gray-600 hover:text-blue-500 dark:text-gray-300 dark:hover:text-blue-400">Inicio</a></li>
                  <li><a routerLink="/principal/publicarCasa" class="text-gray-600 hover:text-blue-500 dark:text-gray-300 dark:hover:text-blue-400">Vender</a></li>
                  <li><a href="#" class="text-gray-600 hover:text-blue-500 dark:text-gray-300 dark:hover:text-blue-400">Alquilar</a></li>
                  <li><a routerLink="/register" class="text-gray-600 hover:text-blue-500 dark:text-gray-300 dark:hover:text-blue-400">Registrarse</a></li> 
              </ul>
          </div>
          
          <div class="footer-section">
              <h4 class="footer-title dark:text-white">Contacto</h4>
              <ul class="footer-contact">
                  <li class="text-gray-600 dark:text-gray-300"><i class="fas fa-map-marker-alt"></i> Frac. Nigromante, violetas #5</li>
                  <li class="text-gray-600 dark:text-gray-300"><i class="fas fa-phone"></i> +52 415 100 8439</li>
                  <li class="text-gray-600 dark:text-gray-300"><i class="fas fa-envelope"></i>juandavidtapia123gmail.com</li>
              </ul>
          </div>
          
          <div class="footer-section">
              <h4 class="footer-title dark:text-white">Newsletter</h4>
              <p class="newsletter-text text-gray-600 dark:text-gray-300">Suscríbete para recibir las mejores ofertas</p>
              <form class="newsletter-form">
                  <input type="email" placeholder="Tu correo electrónico" class="bg-white dark:bg-gray-700 text-gray-800 dark:text-white" required>
                 
              </form>
          </div>
      </div>
      
      <div class="footer-bottom bg-gray-200 dark:bg-gray-800"> 
          <div class="footer-legal">
              <p class="text-gray-600 dark:text-gray-300">&copy; 2025 Nestly. Todos los derechos reservados.</p>
              <div class="legal-links">
                  <a href="#" class="text-gray-600 hover:text-blue-500 dark:text-gray-300 dark:hover:text-blue-400">Términos y condiciones</a>
                  <a href="#" class="text-gray-600 hover:text-blue-500 dark:text-gray-300 dark:hover:text-blue-400">Política de privacidad</a>
                  <a href="#" class="text-gray-600 hover:text-blue-500 dark:text-gray-300 dark:hover:text-blue-400">Aviso legal</a>
              </div>
          </div>
      </div>
    </footer>
  </div>
</div>
</div>